
<div class="confirmation-dialog">
    <h2 mat-dialog-title>
      <mat-icon>delete</mat-icon>
      Delete Task
    </h2>
  
    <mat-dialog-content>
      <div class="task-info">
        <div class="info-row">
          <span class="label">Task Name:</span>
          <span class="value">{{ data.taskName }}</span>
        </div>
        
        <div class="info-row">
          <span class="label">Project:</span>
          <span class="value">{{ data.projectName || 'N/A' }}</span>
        </div>
        
        <div class="info-row">
          <span class="label">Assigned To:</span>
          <span class="value">{{ data.assignedToEmployeeName || 'Unassigned' }}</span>
        </div>
        
        <div class="info-row">
          <span class="label">Deadline:</span>
          <span class="value">{{ data.deadline | date:'mediumDate' }}</span>
        </div>
        
        <div class="info-row">
          <span class="label">Priority:</span>
          <span class="value" [class]="'priority-' + (data.taskPriorityName?.toLowerCase() || 'unknown')">
            {{ data.taskPriorityName || 'Unknown' }}
          </span>
        </div>
        
        <div class="info-row">
          <span class="label">Status:</span>
          <span class="value" [class]="'status-' + (data.taskStatusName?.toLowerCase() || 'unknown')">
            {{ data.taskStatusName || 'Unknown' }}
          </span>
        </div>
        
        @if (data.description) {
          <div class="info-row full-width">
            <span class="label">Description:</span>
            <span class="value description">{{ data.description }}</span>
          </div>
        }
        
        @if (data.taskTypeName) {
          <div class="info-row">
            <span class="label">Type:</span>
            <span class="value">{{ data.taskTypeName }}</span>
          </div>
        }
      </div>
  
      <div class="confirmation-message">
        <p>Are you sure you want to delete this task? This action cannot be undone.</p>
      </div>
  
      <mat-form-field appearance="outline" class="full-width">
        <mat-label>Reason for deletion (optional)</mat-label>
        <textarea 
          matInput 
          [(ngModel)]="reason" 
          rows="3" 
          placeholder="Enter reason for deletion"
          maxlength="500">
        </textarea>
        <mat-hint align="end">{{ reason.length }}/500</mat-hint>
      </mat-form-field>
    </mat-dialog-content>
  
    <mat-dialog-actions align="end">
      <button mat-button (click)="onCancel()" [disabled]="loading">Cancel</button>
      <button 
        mat-raised-button 
        color="warn" 
        (click)="onConfirm()"
        [disabled]="loading">
        @if (loading) {
          <ng-container>
            <mat-icon class="spinner-icon">hourglass_empty</mat-icon>
            Deleting...
          </ng-container>
        }
        @if (!loading) {
          Delete Task
        }
      </button>
    </mat-dialog-actions>
  </div>